#!/bin/bash
choice=$(echo -e "logout\nshutdown\nreboot\nsuspend\nhibernate" | dmenu)
mod="Control_R"

case "$choice" in
	logout)
		xdotool key $mod+ctrl+shift+q &
		;;
	shutdown)
		if [ -x /usr/bin/nmcli ]; then
			nmcli device | fgrep connected | sed 's/^\([a-z0-9]*\).*/\1/' | xargs nmcli device disconnect
		fi
		systemctl poweroff &
		;;
	reboot)
		if [ -x /usr/bin/nmcli ]; then
			nmcli device | fgrep connected | sed 's/^\([a-z0-9]*\).*/\1/' | xargs nmcli device disconnect
		fi
		systemctl reboot &
		;;
	suspend)
		systemctl suspend &
		;;
	hibernate)
		systemctl hibernate &
		;;
esac
