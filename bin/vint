#!/bin/sh
VINT="$HOME/.local/bin/vint"

for arg; do
	if [ -f "$arg" ];then
		file="$arg"
	else
		args="$args $arg"
	fi
done

if [ "$file" != "" ]; then
	tmp=$(mktemp --tmpdir tmp.XXXXXXXXXX)
	sed_file=$(echo "$arg" |  sed 's/\//\\\//g' | sed 's/'\''/'\'\\\\\'\''/g')
	sed 's/tnoremap/inoremap/' "$file" > $tmp

	$VINT $args $tmp | sed 's/^\/tmp\/tmp\..\{10\}/'"$sed_file"'/'

	rm $tmp
else
	exec $VINT
fi
