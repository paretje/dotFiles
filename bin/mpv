#!/bin/sh
files=0
smart=true
for arg in "$@"; do
	if [ "$arg" = "--resume-playback" -o "$arg" = "--no-resume-playback" ]; then
		smart=false
	elif [ -f "$arg" ]; then
		files=$((files+1))
	fi
done

pkill -u $USER -USR1 dunst
if $smart && test $files -gt 1; then
	/usr/bin/mpv --no-resume-playback "$@"
else
	/usr/bin/mpv "$@"
fi
pkill -u $USER -USR2 dunst
