#!/bin/sh
if [ -n "$GPG_ENV_FILE" -a -f "$GPG_ENV_FILE" ]; then
	. "$GPG_ENV_FILE"
	export GPG_TTY=$(tty)
	export GPG_AGENT_INFO
	export SSH_AUTH_SOCK
	export SSH_AGENT_PID
fi

# Fix Java programs
export _JAVA_AWT_WM_NONREPARENTING=1

# Enable Firefox Wayland
export MOZ_ENABLE_WAYLAND=1

# # Configure keyboard layout
export XKB_DEFAULT_LAYOUT=us
export XKB_DEFAULT_VARIANT=altgr-intl
export XKB_DEFAULT_OPTIONS=caps:escape,altwin:prtsc_rwin

# Set brightness of laptop
brightnessctl set 20%

sway_log_dir="$HOME/.local/share/sway"
mkdir -p "$sway_log_dir"

sway_log_file="$sway_log_dir/sway.log"
if [ -f "$sway_log_file" ]; then
	mv -f "$sway_log_file" "$sway_log_file.0"
fi

exec dbus-run-session sway > "$sway_log_file" 2>&1
